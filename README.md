# 114-Backendï¼šGoogle OAuth æ•™å­¸ç¯„ä¾‹

é€™æ˜¯è³‡å·¥ç³»å¾Œç«¯èª²ç¨‹çš„æ•™å­¸å°ˆæ¡ˆï¼Œå¯¦ä½œ Google OAuth ç™»å…¥åŠŸèƒ½ã€‚

## å°ˆæ¡ˆçµæ§‹

```
114-backend/
â”œâ”€â”€ main.py              # FastAPI ä¸»ç¨‹å¼ï¼ŒåŒ…å«å…©ç¨® OAuth æ¶æ§‹
â”œâ”€â”€ google_oauth.py      # Google Token é©—è­‰èˆ‡äº¤æ›
â”œâ”€â”€ auth_utils.py        # JWT ç°½ç™¼èˆ‡é©—è­‰
â”œâ”€â”€ requirements.txt     # Python ä¾è³´å¥—ä»¶
â”œâ”€â”€ .env                 # ç’°å¢ƒè®Šæ•¸ï¼ˆä¸é€²ç‰ˆæ§ï¼‰
â””â”€â”€ postman/             # Postman æ¸¬è©¦æª”æ¡ˆ
```

## å¿«é€Ÿé–‹å§‹

```bash
# 1. å»ºç«‹è™›æ“¬ç’°å¢ƒ
uv venv
source .venv/bin/activate

# 2. å®‰è£ä¾è³´
uv pip install -r requirements.txt

# 3. è¨­å®šç’°å¢ƒè®Šæ•¸
cp .env.example .env
# ç·¨è¼¯ .env å¡«å…¥å¯¦éš›çš„å€¼

# 4. å•Ÿå‹•ä¼ºæœå™¨
fastapi dev main.py

# 5. é–‹å•Ÿ API æ–‡ä»¶ï¼ˆfastapi dev æœƒè‡ªå‹•é¡¯ç¤ºç¶²å€ï¼‰
# http://localhost:8000/docs
```

---

# Google OAuth å…©ç¨®æ¶æ§‹è©³è§£

## ç‚ºä»€éº¼éœ€è¦äº†è§£é€™å€‹ï¼Ÿ

ç•¶ä½ åœ¨ç¶²ç«™ä¸Šçœ‹åˆ°ã€Œä½¿ç”¨ Google ç™»å…¥ã€æŒ‰éˆ•ï¼ŒèƒŒå¾Œå…¶å¯¦æœ‰ä¸åŒçš„å¯¦ä½œæ–¹å¼ã€‚ç†è§£é€™äº›æ¶æ§‹ï¼Œä½ æ‰èƒ½ï¼š
- é¸æ“‡é©åˆä½ å°ˆæ¡ˆçš„æ–¹æ¡ˆ
- é¿å…æŠŠæ©Ÿå¯†è³‡è¨Šæš´éœ²åœ¨å‰ç«¯
- ç†è§£ç‚ºä»€éº¼æŸäº›ç¨‹å¼ç¢¼è¦æ”¾å¾Œç«¯

---

## æ¶æ§‹ Aï¼šAuthorization Code Flow

### æµç¨‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½¿ç”¨è€…   â”‚      â”‚   å‰ç«¯    â”‚      â”‚   å¾Œç«¯   â”‚      â”‚  Google  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                 â”‚                 â”‚                 â”‚
     â”‚ 1. é»æ“Šç™»å…¥     â”‚                 â”‚                 â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚                 â”‚
     â”‚                 â”‚                 â”‚                 â”‚
     â”‚      2. é‡å°å‘è‡³ Googleï¼ˆå¸¶ client_idï¼‰              â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                 â”‚                 â”‚                 â”‚
     â”‚ 3. ç™»å…¥ä¸¦æˆæ¬Š   â”‚                 â”‚                 â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
     â”‚                 â”‚                 â”‚                 â”‚
     â”‚      4. é‡å°å‘å›å‰ç«¯ï¼ŒURL å¸¶è‘— code                  â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                 â”‚                 â”‚                 â”‚
     â”‚                 â”‚ 5. æŠŠ code      â”‚                 â”‚
     â”‚                 â”‚    å‚³çµ¦å¾Œç«¯     â”‚                 â”‚
     â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚
     â”‚                 â”‚                 â”‚                 â”‚
     â”‚                 â”‚                 â”‚ 6. ç”¨ code +    â”‚
     â”‚                 â”‚                 â”‚    client_secretâ”‚
     â”‚                 â”‚                 â”‚    æ› tokens    â”‚
     â”‚                 â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                 â”‚                 â”‚                 â”‚
     â”‚                 â”‚                 â”‚ 7. å›å‚³ tokens  â”‚
     â”‚                 â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                 â”‚                 â”‚                 â”‚
     â”‚                 â”‚ 8. é©—è­‰å¾Œç™¼     â”‚                 â”‚
     â”‚                 â”‚    è‡ªå®¶ JWT     â”‚                 â”‚
     â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                 â”‚
     â”‚                 â”‚                 â”‚                 â”‚
     â”‚ 9. ç™»å…¥æˆåŠŸ     â”‚                 â”‚                 â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                 â”‚                 â”‚
```

### é‡é»

| é …ç›® | èªªæ˜ |
|------|------|
| **å‰ç«¯åšä»€éº¼** | å°å‘ Google â†’ æ”¶åˆ° code â†’ å‚³çµ¦å¾Œç«¯ |
| **å¾Œç«¯åšä»€éº¼** | ç”¨ code + secret æ› token â†’ é©—è­‰ â†’ ç™¼ JWT |
| **client_secret** | åªå­˜åœ¨å¾Œç«¯ï¼Œå‰ç«¯æ°¸é ä¸çŸ¥é“ |
| **å®‰å…¨æ€§** | âœ… è¼ƒé«˜ |

### å°æ‡‰ç¨‹å¼ç¢¼

```python
# main.py
@app.post("/auth/google/code")
async def google_auth_with_code(request: CodeRequest):
    # å¾Œç«¯ç”¨ code + secret æ› tokens
    tokens = exchange_code_for_tokens(request.code, request.redirect_uri)
    # ...
```

---

## æ¶æ§‹ Bï¼šGoogle Sign-In SDK Flow

### æµç¨‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½¿ç”¨è€…   â”‚      â”‚   å‰ç«¯    â”‚      â”‚   å¾Œç«¯   â”‚      â”‚  Google  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                 â”‚                 â”‚                 â”‚
     â”‚ 1. é»æ“Š Google  â”‚                 â”‚                 â”‚
     â”‚    ç™»å…¥æŒ‰éˆ•     â”‚                 â”‚                 â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚                 â”‚
     â”‚                 â”‚                 â”‚                 â”‚
     â”‚      2. Google SDK å½ˆå‡ºç™»å…¥è¦–çª—                     â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
     â”‚                 â”‚                 â”‚                 â”‚
     â”‚ 3. ç™»å…¥ä¸¦æˆæ¬Š   â”‚                 â”‚                 â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
     â”‚                 â”‚                 â”‚                 â”‚
     â”‚                 â”‚ 4. Google ç›´æ¥  â”‚                 â”‚
     â”‚                 â”‚    çµ¦ id_token  â”‚                 â”‚
     â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     â”‚                 â”‚                 â”‚                 â”‚
     â”‚                 â”‚ 5. å‰ç«¯æŠŠ       â”‚                 â”‚
     â”‚                 â”‚    id_token     â”‚                 â”‚
     â”‚                 â”‚    å‚³çµ¦å¾Œç«¯     â”‚                 â”‚
     â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚
     â”‚                 â”‚                 â”‚                 â”‚
     â”‚                 â”‚                 â”‚ 6. å‘ Google    â”‚
     â”‚                 â”‚                 â”‚    é©—è­‰ token   â”‚
     â”‚                 â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                 â”‚                 â”‚                 â”‚
     â”‚                 â”‚                 â”‚ 7. é©—è­‰ OK âœ“    â”‚
     â”‚                 â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                 â”‚                 â”‚                 â”‚
     â”‚                 â”‚ 8. ç™¼è‡ªå®¶ JWT   â”‚                 â”‚
     â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                 â”‚
     â”‚                 â”‚                 â”‚                 â”‚
     â”‚ 9. ç™»å…¥æˆåŠŸ     â”‚                 â”‚                 â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                 â”‚                 â”‚
```

### é‡é»

| é …ç›® | èªªæ˜ |
|------|------|
| **å‰ç«¯åšä»€éº¼** | ç”¨ Google SDK ç™»å…¥ â†’ ç›´æ¥æ‹¿åˆ° id_token â†’ å‚³çµ¦å¾Œç«¯ |
| **å¾Œç«¯åšä»€éº¼** | é©—è­‰ id_token â†’ ç™¼ JWT |
| **client_secret** | ä¸éœ€è¦ï¼ˆæ²’æœ‰ã€Œæ› tokenã€é€™æ­¥ï¼‰ |
| **å®‰å…¨æ€§** | âš ï¸ ä¸€èˆ¬ï¼ˆä½†ä»å®‰å…¨ï¼Œå› ç‚º id_token æœ‰ç°½ç« ï¼‰ |

### å°æ‡‰ç¨‹å¼ç¢¼

```python
# main.py
@app.post("/auth/google")
async def google_auth(request: TokenRequest):
    # ç›´æ¥é©—è­‰ id_tokenï¼ˆä¸éœ€è¦ secretï¼‰
    user_info = verify_google_id_token(request.id_token)
    # ...
```

---

## å…©ç¨®æ¶æ§‹æ¯”è¼ƒ

| | æ¶æ§‹ A (Code Flow) | æ¶æ§‹ B (SDK Flow) |
|---|---|---|
| **ç«¯é»** | `POST /auth/google/code` | `POST /auth/google` |
| **å‰ç«¯å‚³ä»€éº¼** | authorization code | id_token |
| **èª°æ› token** | å¾Œç«¯ | å‰ç«¯ (Google SDK) |
| **éœ€è¦ client_secret** | âœ… å¾Œç«¯éœ€è¦ | âŒ ä¸éœ€è¦ |
| **å¯å‘¼å« Google API** | âœ… æ‹¿åˆ° access_token | âŒ åªæœ‰èº«ä»½è³‡è¨Š |
| **å¯¦ä½œè¤‡é›œåº¦** | è¼ƒè¤‡é›œ | è¼ƒç°¡å–® |
| **é©ç”¨æƒ…å¢ƒ** | æ­£å¼ç”¢å“ã€éœ€è¦ Google API | å¿«é€Ÿé–‹ç™¼ã€åªéœ€ç™»å…¥ |

---

## å®‰å…¨æ€§é‡é»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ğŸ” å®‰å…¨æ€§åŸå‰‡                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   client_id     â†’ å…¬é–‹çš„ï¼Œå¯ä»¥æ”¾å‰ç«¯                        â”‚
â”‚   client_secret â†’ æ©Ÿå¯†çš„ï¼Œåªèƒ½æ”¾å¾Œç«¯                        â”‚
â”‚                                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                             â”‚
â”‚   å¦‚æœ secret æ”¾å‰ç«¯æœƒæ€æ¨£ï¼Ÿ                                â”‚
â”‚                                                             â”‚
â”‚   1. ä»»ä½•äººéƒ½èƒ½å¾ç€è¦½å™¨ DevTools çœ‹åˆ°                       â”‚
â”‚   2. ä»»ä½•äººéƒ½èƒ½å‡è£æ˜¯ä½ çš„æ‡‰ç”¨ç¨‹å¼                           â”‚
â”‚   3. å¯èƒ½è¢«ç”¨ä¾†ç™¼é€é‡£é­šæ”»æ“Š                                â”‚
â”‚   4. Google å¯èƒ½æœƒåœç”¨ä½ çš„ OAuth æ†‘è­‰                       â”‚
â”‚                                                             â”‚
â”‚   çµè«–ï¼šsecret æ°¸é ä¸èƒ½å‡ºç¾åœ¨å‰ç«¯ç¨‹å¼ç¢¼ä¸­ï¼                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# Troubleshooting å¸¸è¦‹å•é¡Œ

## Git ç›¸é—œå•é¡Œ

### å•é¡Œï¼šgit push è¢« GitHub æ“‹ä¸‹ä¾†ï¼ˆåµæ¸¬åˆ° secretsï¼‰

**éŒ¯èª¤è¨Šæ¯ï¼š**
```
remote: error: GH013: Repository rule violations found for refs/heads/main.
remote: - GITHUB PUSH PROTECTION
remote:   Push cannot contain secrets
remote:   â€”â€” Google OAuth Client Secret â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
```

**åŸå› ï¼š**
GitHub æœ‰å…§å»ºçš„ Secret Scanning åŠŸèƒ½ï¼Œæœƒè‡ªå‹•åµæ¸¬ç¨‹å¼ç¢¼ä¸­çš„ API é‡‘é‘°ã€å¯†ç¢¼ç­‰æ©Ÿå¯†è³‡è¨Šã€‚

**è§£æ³• 1ï¼šç§»é™¤ secrets ä¸¦é‡å¯«æ­·å²ï¼ˆæ¨è–¦ï¼‰**

```bash
# 1. å…ˆæŠŠæª”æ¡ˆä¸­çš„ secrets æ”¹æˆä½”ä½ç¬¦
#    ä¾‹å¦‚ï¼šGOCSPX-xxx... â†’ YOUR_GOOGLE_CLIENT_SECRET

# 2. Soft reset åˆ°æ²’æœ‰ secrets çš„ commit
git log --oneline                    # æ‰¾åˆ°ä¹¾æ·¨çš„ commit hash
git reset --soft <clean-commit-hash>

# 3. é‡æ–° commitï¼ˆé€™æ¬¡ä¸åŒ…å« secretsï¼‰
git add .
git commit -m "feat: implement feature without secrets"

# 4. Force pushï¼ˆå› ç‚ºé‡å¯«äº†æ­·å²ï¼‰
git push --force origin main
```

**è§£æ³• 2ï¼šå…è¨±é€™å€‹ secretï¼ˆä¸æ¨è–¦ï¼Œä½†é©åˆæ•™å­¸ç”¨ï¼‰**

GitHub éŒ¯èª¤è¨Šæ¯ä¸­æœƒæä¾›ä¸€å€‹é€£çµï¼Œé»æ“Šå¾Œå¯ä»¥é¸æ“‡ã€ŒAllow this secretã€ã€‚

âš ï¸ æ³¨æ„ï¼šé€™æ¨£åšæœƒè®“ secret å…¬é–‹åœ¨ GitHub ä¸Šï¼Œåƒ…é©åˆæ•™å­¸ç”¨çš„æ¸¬è©¦æ†‘è­‰ã€‚

---

### å•é¡Œï¼šgit push è¢«æ‹’çµ•ï¼ˆnon-fast-forwardï¼‰

**éŒ¯èª¤è¨Šæ¯ï¼š**
```
! [rejected]        main -> main (non-fast-forward)
error: failed to push some refs to 'github.com:xxx/xxx.git'
hint: Updates were rejected because the tip of your current branch is behind
```

**åŸå› ï¼š**
é ç«¯æœ‰ä½ æœ¬åœ°æ²’æœ‰çš„ commitï¼ˆå¯èƒ½æ˜¯åˆ¥äºº push çš„ï¼Œæˆ–ä½ åœ¨å¦ä¸€å°é›»è…¦ push çš„ï¼‰ã€‚

**è§£æ³•ï¼š**

```bash
# æ–¹æ³• 1ï¼šå…ˆ pull å† pushï¼ˆä¿ç•™å…©é‚Šçš„è®Šæ›´ï¼‰
git pull --rebase origin main
git push origin main

# æ–¹æ³• 2ï¼šå¼·åˆ¶è¦†è“‹é ç«¯ï¼ˆâš ï¸ æœƒä¸Ÿå¤±é ç«¯çš„è®Šæ›´ï¼‰
git push --force origin main
```

---

### å•é¡Œï¼šä¸å°å¿ƒ commit äº†ä¸è©² commit çš„æª”æ¡ˆ

**æƒ…å¢ƒï¼š** æŠŠ `.env` æˆ–å…¶ä»–æ©Ÿå¯†æª”æ¡ˆ commit äº†

**è§£æ³•ï¼š**

```bash
# 1. å¾ git è¿½è¹¤ä¸­ç§»é™¤ï¼ˆä½†ä¿ç•™æœ¬åœ°æª”æ¡ˆï¼‰
git rm --cached .env

# 2. ç¢ºèª .gitignore æœ‰åŠ å…¥é€™å€‹æª”æ¡ˆ
echo ".env" >> .gitignore

# 3. Commit é€™å€‹è®Šæ›´
git add .gitignore
git commit -m "chore: remove .env from tracking"

# 4. å¦‚æœå·²ç¶“ push åˆ°é ç«¯ï¼Œéœ€è¦æ¸…ç†æ­·å²
#    ï¼ˆåƒè€ƒä¸Šé¢ã€Œç§»é™¤ secrets ä¸¦é‡å¯«æ­·å²ã€çš„æ­¥é©Ÿï¼‰
```

---

### å•é¡Œï¼šæƒ³è¦å›åˆ°ä¹‹å‰çš„ç‰ˆæœ¬

```bash
# æŸ¥çœ‹æ­·å²
git log --oneline

# æ–¹æ³• 1ï¼šåªæ˜¯æƒ³çœ‹ä¹‹å‰çš„ç¨‹å¼ç¢¼ï¼ˆä¸ä¿®æ”¹æ­·å²ï¼‰
git checkout <commit-hash>
# çœ‹å®Œå¾Œå›åˆ°æœ€æ–°
git checkout main

# æ–¹æ³• 2ï¼šæƒ³è¦å›å¾©åˆ°æŸå€‹ç‰ˆæœ¬ï¼Œä½†ä¿ç•™ä¹‹å¾Œçš„è®Šæ›´è¨˜éŒ„
git revert <commit-hash>

# æ–¹æ³• 3ï¼šæƒ³è¦å®Œå…¨å›åˆ°æŸå€‹ç‰ˆæœ¬ï¼ˆâš ï¸ æœƒä¸Ÿå¤±ä¹‹å¾Œçš„ commitï¼‰
git reset --hard <commit-hash>
git push --force origin main
```

---

## Python / FastAPI ç›¸é—œå•é¡Œ

### å•é¡Œï¼šWindows PowerShell ç„¡æ³•å•Ÿå‹•è™›æ“¬ç’°å¢ƒ

**éŒ¯èª¤è¨Šæ¯ï¼š**
```
.venv\Scripts\Activate.ps1 cannot be loaded because running scripts is disabled on this system.
```

**åŸå› ï¼š**
Windows PowerShell é è¨­çš„åŸ·è¡ŒåŸå‰‡ (Execution Policy) æœƒç¦æ­¢åŸ·è¡Œè…³æœ¬ã€‚

**è§£æ³•ï¼š**

```powershell
# æ–¹æ³• 1ï¼šæš«æ™‚å…è¨±åŸ·è¡Œï¼ˆåªå°ç•¶å‰ PowerShell è¦–çª—æœ‰æ•ˆï¼‰
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope Process

# ç„¶å¾Œå°±å¯ä»¥å•Ÿå‹•è™›æ“¬ç’°å¢ƒ
.venv\Scripts\Activate.ps1
```

```powershell
# æ–¹æ³• 2ï¼šæ°¸ä¹…å…è¨±ç•¶å‰ä½¿ç”¨è€…åŸ·è¡Œè…³æœ¬ï¼ˆæ¨è–¦ï¼‰
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser

# ä¹‹å¾Œæ¯æ¬¡éƒ½å¯ä»¥ç›´æ¥å•Ÿå‹•
.venv\Scripts\Activate.ps1
```

```cmd
# æ–¹æ³• 3ï¼šæ”¹ç”¨ CMDï¼ˆå‘½ä»¤æç¤ºå­—å…ƒï¼‰è€Œä¸æ˜¯ PowerShell
.venv\Scripts\activate.bat
```

**è£œå……èªªæ˜ï¼š**
- `RemoteSigned`ï¼šå…è¨±åŸ·è¡Œæœ¬åœ°è…³æœ¬ï¼Œä½†å¾ç¶²è·¯ä¸‹è¼‰çš„è…³æœ¬éœ€è¦ç°½å
- `Scope Process`ï¼šåªå½±éŸ¿ç•¶å‰è¦–çª—ï¼Œé—œé–‰å¾Œå¤±æ•ˆ
- `Scope CurrentUser`ï¼šæ°¸ä¹…è¨­å®šï¼Œåªå½±éŸ¿ç•¶å‰ä½¿ç”¨è€…

---

### å•é¡Œï¼šModuleNotFoundError: No module named 'xxx'

**è§£æ³•ï¼š**

```bash
# 1. ç¢ºèªè™›æ“¬ç’°å¢ƒå·²å•Ÿå‹•
source .venv/bin/activate

# 2. å®‰è£ä¾è³´
uv pip install -r requirements.txt

# 3. å¦‚æœé‚„æ˜¯ä¸è¡Œï¼Œé‡å»ºè™›æ“¬ç’°å¢ƒ
rm -rf .venv
uv venv
source .venv/bin/activate
uv pip install -r requirements.txt
```

---

### å•é¡Œï¼šç’°å¢ƒè®Šæ•¸è®€ä¸åˆ°

**ç—‡ç‹€ï¼š** `GOOGLE_CLIENT_ID` æ˜¯ `None`

**è§£æ³•ï¼š**

```bash
# 1. ç¢ºèª .env æª”æ¡ˆå­˜åœ¨
ls -la .env

# 2. ç¢ºèª .env å…§å®¹æ­£ç¢ºï¼ˆæ²’æœ‰å¤šé¤˜çš„ç©ºæ ¼æˆ–å¼•è™Ÿï¼‰
cat .env

# æ­£ç¢ºæ ¼å¼ï¼š
GOOGLE_CLIENT_ID=xxx.apps.googleusercontent.com

# éŒ¯èª¤æ ¼å¼ï¼š
GOOGLE_CLIENT_ID = "xxx"   # ä¸è¦æœ‰ç©ºæ ¼å’Œå¼•è™Ÿ
```

---

### å•é¡Œï¼šã€Œç„¡æ•ˆçš„ Google Tokenã€

**å¯èƒ½åŸå› ï¼š**

1. **Token éæœŸ** - id_token ç´„ 1 å°æ™‚å¾ŒéæœŸï¼Œé‡æ–°å–å¾—å³å¯
2. **Client ID ä¸ç¬¦** - ç¢ºèª `.env` ä¸­çš„ `GOOGLE_CLIENT_ID` èˆ‡ OAuth Playground è¨­å®šçš„ä¸€è‡´
3. **Token è¤‡è£½ä¸å®Œæ•´** - id_token å¾ˆé•·ï¼Œç¢ºèªå®Œæ•´è¤‡è£½

---

## OAuth Playground ç›¸é—œå•é¡Œ

### å•é¡Œï¼šAuthorization Error - redirect_uri_mismatch

**åŸå› ï¼š**
OAuth Playground çš„ redirect URI æ²’æœ‰åœ¨ Google Cloud Console ä¸­è¨­å®šã€‚

**è§£æ³•ï¼š**

1. åˆ° [Google Cloud Console](https://console.cloud.google.com/apis/credentials)
2. é»é¸ä½ çš„ OAuth 2.0 Client ID
3. åœ¨ã€ŒAuthorized redirect URIsã€åŠ å…¥ï¼š
   ```
   https://developers.google.com/oauthplayground
   ```

---

# AI æ™‚ä»£çš„å­¸ç¿’æ–¹æ³•

## ç•¶ä½ çœ‹ä¸æ‡‚ AI ç”Ÿæˆçš„ç­”æ¡ˆæ™‚

åœ¨ AI æ™‚ä»£ï¼Œæˆ‘å€‘ç¶“å¸¸é‡åˆ°é€™ç¨®æƒ…æ³ï¼š

> ã€ŒAI çµ¦äº†æˆ‘ä¸€æ®µç¨‹å¼ç¢¼ï¼Œä½†æˆ‘å®Œå…¨çœ‹ä¸æ‡‚å®ƒåœ¨å¹¹å˜›...ã€

é€™å¾ˆæ­£å¸¸ï¼ä»¥ä¸‹æ˜¯æœ‰æ•ˆçš„äº’å‹•ç­–ç•¥ï¼š

### ç­–ç•¥ 1ï¼šè«‹ AI è§£é‡‹æµç¨‹ï¼Œè€Œä¸æ˜¯ç›´æ¥çµ¦ç¨‹å¼ç¢¼

```
âŒ ä¸å¥½çš„å•æ³•ï¼š
ã€Œå¹«æˆ‘å¯¦ä½œ Google OAuth ç™»å…¥ã€

âœ… å¥½çš„å•æ³•ï¼š
ã€Œè«‹ç”¨æµç¨‹åœ–è§£é‡‹ Google OAuth ç™»å…¥çš„é‹ä½œåŸç†ï¼Œ
ä¸è¦çµ¦æˆ‘ç¨‹å¼ç¢¼ï¼Œæˆ‘æƒ³å…ˆç†è§£æ¦‚å¿µã€
```

### ç­–ç•¥ 2ï¼šè¿½å•ã€Œç‚ºä»€éº¼ã€

```
âŒ åªå• Whatï¼š
ã€Œé€™æ®µç¨‹å¼ç¢¼æ˜¯ä»€éº¼æ„æ€ï¼Ÿã€

âœ… è¿½å• Whyï¼š
ã€Œç‚ºä»€éº¼ client_secret ä¸èƒ½æ”¾å‰ç«¯ï¼Ÿã€
ã€Œç‚ºä»€éº¼éœ€è¦å…©æ¬¡ redirectï¼Ÿã€
ã€Œç‚ºä»€éº¼è¦é©—è­‰ id_tokenï¼Ÿä¸é©—è­‰æœƒæ€æ¨£ï¼Ÿã€
```

### ç­–ç•¥ 3ï¼šè«‹ AI æ¯”è¼ƒä¸åŒæ–¹æ¡ˆ

```
ã€ŒOAuth æœ‰å“ªäº›ä¸åŒçš„ flowï¼Ÿå„è‡ªé©åˆä»€éº¼æƒ…å¢ƒï¼Ÿã€
ã€ŒAuthorization Code Flow å’Œ Implicit Flow å·®åœ¨å“ªï¼Ÿã€
ã€Œç‚ºä»€éº¼ç¾åœ¨ä¸æ¨è–¦ç”¨ Implicit Flowï¼Ÿã€
```

### ç­–ç•¥ 4ï¼šè«‹ AI ç•«åœ–æˆ–ç”¨é¡æ¯”

```
ã€Œå¯ä»¥ç”¨ç”Ÿæ´»ä¸­çš„ä¾‹å­è§£é‡‹ OAuth å—ï¼Ÿã€
ã€Œè«‹ç•«ä¸€å€‹æ™‚åºåœ–èªªæ˜ç™»å…¥æµç¨‹ã€
ã€Œid_token å’Œ access_token çš„å·®åˆ¥ï¼Œå¯ä»¥ç”¨æ¯”å–»è§£é‡‹å—ï¼Ÿã€
```

### ç­–ç•¥ 5ï¼šæŒ‡å‡ºä½ çš„å›°æƒ‘é»

```
âŒ å¤ªç± çµ±ï¼š
ã€Œæˆ‘çœ‹ä¸æ‡‚ã€

âœ… å…·é«”èªªæ˜å›°æƒ‘ï¼š
ã€Œæˆ‘çœ‹åˆ°æµç¨‹åœ–ä¸­æœ‰ä¸€æ­¥æ˜¯ 302 redirectï¼Œ
ä½†æˆ‘ä¸æ‡‚ç‚ºä»€éº¼ Google ä¸ç›´æ¥å›å‚³è³‡æ–™ï¼Œ
è€Œæ˜¯è¦ redirect å›æˆ‘çš„ç¶²ç«™ï¼Ÿã€
```

### ç­–ç•¥ 6ï¼šè«‹ AI æ‰®æ¼”è€å¸«

```
ã€Œå‡è¨­æˆ‘å®Œå…¨ä¸æ‡‚ OAuthï¼Œ
è«‹ç”¨è˜‡æ ¼æ‹‰åº•å¼å•ç­”æ³•ï¼Œ
ä¸€æ­¥æ­¥å¼•å°æˆ‘ç†è§£é€™å€‹æ¦‚å¿µã€
```

---

## å¯¦éš›æ¡ˆä¾‹ï¼šé€™å€‹å°ˆæ¡ˆçš„èª•ç”Ÿéç¨‹

é€™å€‹æ•™å­¸å°ˆæ¡ˆå°±æ˜¯é€éèˆ‡ AI äº’å‹•å®Œæˆçš„ï¼Œä»¥ä¸‹æ˜¯å¯¦éš›çš„å°è©±æ‘˜è¦ï¼š

### ç¬¬ä¸€è¼ªï¼šè«‹ AI ç”Ÿæˆç¨‹å¼ç¢¼
```
æˆ‘ï¼šã€Œè«‹å¹«æˆ‘å¯¦ä½œ Google OAuthã€
AIï¼šï¼ˆç”Ÿæˆäº†ç¨‹å¼ç¢¼ï¼‰
```

### ç¬¬äºŒè¼ªï¼šç™¼ç¾å•é¡Œï¼Œè¿½å•
```
æˆ‘ï¼šã€Œä½ çš„æµç¨‹åœ–é¡¯ç¤ºå‰ç«¯åœ¨æ› tokenï¼Œ
     ä½†æˆ‘ä¸Šèª²è·Ÿå­¸ç”Ÿèªªé€™æ‡‰è©²åœ¨å¾Œç«¯åšï¼Œ
     å¯ä»¥è§£é‡‹ä¸€ä¸‹å—ï¼Ÿã€

AIï¼šã€Œä½ èªªå¾—å°ï¼è®“æˆ‘é‡æ–°èªªæ˜...
     (è©³ç´°è§£é‡‹äº†å…©ç¨®æ¶æ§‹çš„å·®ç•°)ã€
```

### ç¬¬ä¸‰è¼ªï¼šè«‹ AI è£œå……å¦ä¸€ç¨®æ¶æ§‹
```
æˆ‘ï¼šã€Œè«‹å…ˆ commit ç›®å‰çš„ç‰ˆæœ¬ï¼Œ
     å†è£œä¸Š Authorization Code Flowï¼Œ
     é€™æ¨£å­¸ç”Ÿå¯ä»¥æ¯”è¼ƒå…©ç¨®æ¶æ§‹ã€

AIï¼šï¼ˆå®Œæˆå…©å€‹ commitï¼Œæ¸…æ¥šå€åˆ†å…©ç¨®å¯¦ä½œï¼‰
```

### å­¸åˆ°çš„ç¶“é©—

1. **AI ä¸æœƒä¸»å‹•å‘Šè¨´ä½ å®ƒçš„å‡è¨­**
   - å®ƒå‡è¨­ä½ æƒ³è¦æœ€ç°¡å–®çš„æ–¹æ¡ˆï¼ˆæ¶æ§‹ Bï¼‰
   - ä½†æœ€ç°¡å–®ä¸ä¸€å®šæœ€é©åˆæ•™å­¸

2. **ä½ çš„é ˜åŸŸçŸ¥è­˜å¾ˆé‡è¦**
   - å› ç‚ºæˆ‘çŸ¥é“ã€Œtoken äº¤æ›æ‡‰è©²åœ¨å¾Œç«¯ã€
   - æ‰èƒ½ç™¼ç¾ AI çš„æµç¨‹åœ–æœ‰èª¤å°

3. **å°è©±å¼å­¸ç¿’æ¯”å–®æ¬¡æå•æ›´æœ‰æ•ˆ**
   - é€éè¿½å•å’Œè³ªç–‘ï¼Œå¾—åˆ°æ›´æ·±å…¥çš„ç†è§£
   - AI çš„ã€ŒéŒ¯èª¤ã€åè€Œæ˜¯å¾ˆå¥½çš„æ•™å­¸ç´ æ

---

## çµ¦å­¸ç”Ÿçš„å»ºè­°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ğŸ“ AI æ™‚ä»£çš„å­¸ç¿’å¿ƒæ³•                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. ä¸è¦åªè¤‡è£½è²¼ä¸Š AI çš„ç­”æ¡ˆ                                â”‚
â”‚     â†’ å•å®ƒã€Œç‚ºä»€éº¼é€™æ¨£å¯«ã€                                  â”‚
â”‚                                                             â”‚
â”‚  2. ç™¼ç¾çœ‹ä¸æ‡‚çš„åœ°æ–¹ï¼Œæ˜¯å­¸ç¿’çš„èµ·é»                          â”‚
â”‚     â†’ æŠŠå›°æƒ‘å‘Šè¨´ AIï¼Œè«‹å®ƒè§£é‡‹                               â”‚
â”‚                                                             â”‚
â”‚  3. å˜—è©¦è³ªç–‘ AI çš„ç­”æ¡ˆ                                      â”‚
â”‚     â†’ AI ä¸ä¸€å®šå°ï¼Œä½ çš„æ‡·ç–‘å¯èƒ½æ˜¯å°çš„                       â”‚
â”‚                                                             â”‚
â”‚  4. è«‹ AI ç”¨ä¸åŒæ–¹å¼è§£é‡‹                                    â”‚
â”‚     â†’ åœ–è§£ã€é¡æ¯”ã€å°æ¯”ã€èˆ‰ä¾‹                                â”‚
â”‚                                                             â”‚
â”‚  5. å…ˆç†è§£æ¦‚å¿µï¼Œå†çœ‹ç¨‹å¼ç¢¼                                  â”‚
â”‚     â†’ ã€Œå…ˆä¸è¦çµ¦ç¨‹å¼ç¢¼ï¼Œè§£é‡‹åŸç†å°±å¥½ã€                      â”‚
â”‚                                                             â”‚
â”‚  6. å»ºç«‹è‡ªå·±çš„çŸ¥è­˜æ¡†æ¶                                      â”‚
â”‚     â†’ AI æ˜¯å·¥å…·ï¼Œä½†ç†è§£æ˜¯ä½ è‡ªå·±çš„                           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# Docker å®¹å™¨åŒ– / Docker Containerization

## ç‚ºä»€éº¼è¦å­¸ Dockerï¼Ÿ / Why Learn Docker?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ğŸ³ Docker è§£æ±ºçš„å•é¡Œ / Problems Docker Solves        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   ã€Œåœ¨æˆ‘é›»è…¦ä¸Šå¯ä»¥è·‘å•Šï¼ã€                                    â”‚
â”‚   "It works on my machine!"                                 â”‚
â”‚                                                             â”‚
â”‚   é€™å¥è©±ä½ ä¸€å®šè½éã€‚å•é¡Œåœ¨æ–¼ï¼š                               â”‚
â”‚   You've heard this before. The problems are:              â”‚
â”‚   - Windows / Mac / Linux ç’°å¢ƒä¸åŒ                          â”‚
â”‚     Different OS environments                               â”‚
â”‚   - Python ç‰ˆæœ¬ä¸åŒ / Different Python versions             â”‚
â”‚   - å¥—ä»¶ç‰ˆæœ¬ä¸åŒ / Different package versions               â”‚
â”‚                                                             â”‚
â”‚   Docker çš„è§£æ³•ï¼šæŠŠã€Œç’°å¢ƒã€ä¹Ÿæ‰“åŒ…é€²å»ï¼                      â”‚
â”‚   Docker's solution: Package the environment too!          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å¿«é€Ÿé–‹å§‹ / Quick Start

```bash
# 1. å»ºç«‹ Docker Image / Build Docker Image
docker build -t my-fastapi-app .

# 2. å•Ÿå‹• Container / Start Container
docker run -p 8000:8000 my-fastapi-app

# 3. æ‰“é–‹ç€è¦½å™¨ / Open browser
open http://localhost:8000/docs
```

## Dockerfile è§£æ / Dockerfile Explained

```dockerfile
# åŸºåº•ç’°å¢ƒ / Base environment: Python 3.12 lightweight Linux
FROM python:3.12-slim

# è¨­å®šå·¥ä½œç›®éŒ„ / Set working directory
WORKDIR /app

# å…ˆè¤‡è£½ requirements.txt ä¸¦å®‰è£ï¼ˆåˆ©ç”¨å¿«å–åŠ é€Ÿï¼‰
# Copy requirements.txt first and install (leverages cache)
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# è¤‡è£½ç¨‹å¼ç¢¼ / Copy code
COPY . .

# æ¨™ç¤ºä½¿ç”¨çš„ port / Declare port
EXPOSE 8000

# å®¹å™¨å•Ÿå‹•æ™‚åŸ·è¡Œçš„æŒ‡ä»¤ / Command to run when container starts
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
```

### å¸¸è¦‹å•é¡Œ / FAQ

| å•é¡Œ Problem | è§£æ³• Solution |
|------|------|
| `docker: command not found` | è«‹å…ˆå®‰è£ Install [Docker Desktop](https://www.docker.com/products/docker-desktop/) |
| build å¾ˆæ…¢ Slow build | ç¢ºèª `.dockerignore` æœ‰æ’é™¤ `.venv/` Check `.dockerignore` excludes `.venv/` |
| å®¹å™¨å…§ç„¡æ³•é€£ç¶² No network | æª¢æŸ¥é˜²ç«ç‰†è¨­å®š Check firewall settings |

---

# GitHub Actions è‡ªå‹•åŒ– / GitHub Actions Automation

## ä»€éº¼æ˜¯ GitHub Actionsï¼Ÿ / What is GitHub Actions?

ä½ å¯ä»¥æŠŠå®ƒæƒ³æˆï¼š
Think of it as:

> ã€ŒGitHub é€ä½ ä¸€å°å…è²»çš„è‡¨æ™‚é›»è…¦ï¼Œæ¯æ¬¡ä½  push ç¨‹å¼ç¢¼ï¼Œå®ƒå°±è‡ªå‹•å¹«ä½ è·‘æ¸¬è©¦ã€buildã€éƒ¨ç½²ã€
> "GitHub gives you a free temporary computer that automatically runs tests, builds, and deploys every time you push code"

## å·¥ä½œæµç¨‹èªªæ˜ / Workflow Overview

æˆ‘å€‘çš„ `.github/workflows/deploy.yml` å®šç¾©äº†ä¸‰å€‹éšæ®µï¼š
Our `.github/workflows/deploy.yml` defines three stages:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ§ª Test    â”‚ â”€â”€â–¶ â”‚  ğŸ³ Build   â”‚ â”€â”€â–¶ â”‚  ğŸš€ Deploy  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                     â”‚                    â”‚
     â–¼                     â–¼                    â–¼
  æª¢æŸ¥ç¨‹å¼ç¢¼           å»ºç«‹ Docker          è§¸ç™¼ Render
  Check code          Build/test           Trigger Render
  imports             Docker image         redeploy
```

## å¦‚ä½•æŸ¥çœ‹åŸ·è¡Œçµæœï¼Ÿ / How to View Results?

1. åˆ°ä½ çš„ GitHub Repository / Go to your GitHub Repository
2. é»æ“Šä¸Šæ–¹çš„ **Actions** é ç±¤ / Click the **Actions** tab
3. å¯ä»¥çœ‹åˆ°æ¯æ¬¡ push çš„åŸ·è¡Œç‹€æ…‹ï¼ˆâœ… æˆåŠŸ / âŒ å¤±æ•—ï¼‰
   See execution status for each push (âœ… success / âŒ failure)
4. é»é€²å»å¯ä»¥çœ‹æ¯å€‹ step çš„è©³ç´° log
   Click in to see detailed logs for each step

## ç·´ç¿’ï¼šæ•…æ„è®“ CI å¤±æ•— / Exercise: Intentionally Fail CI

```python
# åœ¨ main.py åŠ å…¥èªæ³•éŒ¯èª¤ / Add syntax error to main.py
def broken_function(
    # ç¼ºå°‘å³æ‹¬è™Ÿï¼ / Missing closing parenthesis!
```

Push å¾Œè§€å¯Ÿ GitHub Actions é é¢ï¼Œä½ æœƒçœ‹åˆ° Test job å¤±æ•—ã€‚
After pushing, observe the GitHub Actions page - Test job will fail.

---

# éƒ¨ç½²åˆ° Render / Deploy to Render

## ç‚ºä»€éº¼é¸æ“‡ Renderï¼Ÿ / Why Choose Render?

| å¹³å° Platform | é›£åº¦ Difficulty | å…è²»é¡åº¦ Free Tier | é©åˆ Best For |
|------|------|---------|---------|
| **Render** | â­ ç°¡å–® Easy | 750 hrs/month | æ•™å­¸ Learning, Side Project |
| Railway | â­ ç°¡å–® Easy | $5/month | æ•™å­¸ Learning, Side Project |
| AWS/GCP | â­â­â­ å›°é›£ Hard | Complex | æ­£å¼ç”¢å“ Production |

Render æ”¯æ´ã€Œé€£çµ GitHub â†’ è‡ªå‹•åµæ¸¬ Dockerfile â†’ è‡ªå‹•éƒ¨ç½²ã€ï¼Œéå¸¸é©åˆæ•™å­¸ã€‚
Render supports "Connect GitHub â†’ Auto-detect Dockerfile â†’ Auto-deploy", perfect for learning.

## éƒ¨ç½²æ­¥é©Ÿ / Deployment Steps

> ğŸ“– è©³ç´°æ­¥é©Ÿè«‹åƒè€ƒ For detailed steps, see [docs/RENDER_SETUP.md](./docs/RENDER_SETUP.md)

### å¿«é€Ÿæ‘˜è¦ / Quick Summary

1. **å»ºç«‹å¸³è™Ÿ Create Account** - åˆ° [render.com](https://render.com) ç”¨ GitHub ç™»å…¥
   Go to render.com and log in with GitHub
2. **å»ºç«‹æœå‹™ Create Service** - New â†’ Web Service â†’ é€£çµ repo / Connect repo
3. **è¨­å®š Configure** - Runtime: Docker, Instance: Free
4. **ç’°å¢ƒè®Šæ•¸ Environment Variables** - åŠ å…¥ `GOOGLE_CLIENT_ID`, `GOOGLE_CLIENT_SECRET`, `JWT_SECRET_KEY`
5. **Deploy Hook** - è¤‡è£½ URL å­˜åˆ° GitHub Secrets / Copy URL to GitHub Secrets

### å®Œæˆï¼ Done!

ä½ çš„ API ç¶²å€ Your API URLï¼š`https://ä½ çš„æœå‹™åç¨±.onrender.com`

---

## æ¸¬è©¦æ–¹å¼

è«‹åƒè€ƒ [postman/README.md](./postman/README.md) çš„èªªæ˜ã€‚

---

## License

MIT - æ•™å­¸ç”¨é€”ï¼Œæ­¡è¿è‡ªç”±ä½¿ç”¨
